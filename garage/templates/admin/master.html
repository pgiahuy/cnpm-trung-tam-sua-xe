{% extends 'admin/base.html' %}
{% import 'admin/layout.html' as layout with context %}
{% import 'admin/static.html' as admin_static with context %}

<!DOCTYPE html>
<html lang="en">
<head>
    <title>
        {% if admin_view.category %}{{ admin_view.category }} - {% endif %}
        {{ admin_view.name }} - {{ admin_view.admin.name }}
    </title>

    {% block head_meta %}
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% endblock %}

    {% block head_css %}
    <!-- Bootstrap & Flask-Admin CSS -->
    <link href="{{ admin_static.url(
    filename='bootstrap/bootstrap4/swatch/{swatch}/bootstrap.min.css'.format(swatch=theme.swatch), v='4.2.1') }}" rel="stylesheet">

    {% if theme.swatch == 'default' %}
    <link href="{{ admin_static.url(
        filename='bootstrap/bootstrap4/css/bootstrap.min.css', v='4.2.1') }}" rel="stylesheet">
    {% endif %}

    <link href="{{ admin_static.url(filename='admin/css/bootstrap4/admin.css', v='1.1.1') }}" rel="stylesheet">

    <link href="{{ admin_static.url(
        filename='bootstrap/bootstrap4/css/font-awesome.min.css', v='4.7.0') }}" rel="stylesheet">

    <!-- Custom sidebar CSS -->
    <link rel="stylesheet"
          href="{{ url_for('static', filename='css/admin.css') }}">
    {% endblock %}

    {% block head %}{% endblock %}
</head>


<body>
{% block page_body %}
<div class="wrapper">

    <!-- SIDEBAR -->
    <nav id="sidebar">
        <div class="sidebar-header">
            <a href="{{ admin_view.admin.url }}">
                {{ admin_view.admin.name }}
            </a>
        </div>

        <ul class="list-unstyled components">
            {{ layout.menu() }}
        </ul>
    </nav>

    <!-- CONTENT -->
    <div id="content">

        <!-- TOP NAVBAR -->
        <nav class="navbar navbar-expand-lg navbar-light top-navbar mb-4">
            <button id="sidebarCollapse" class="btn mr-3">â˜°</button>
            <ul class="navbar-nav">
                <li class="nav-item active">
                    <a class="nav-link font-weight-bold" href="#">
                        {{ admin_view.name }}
                    </a>
                </li>
            </ul>
            <div class="collapse navbar-collapse">
                <ul class="navbar-nav ml-auto admin-user-area">
                    {{ layout.menu_links() }}

                    {% if current_user.is_authenticated %}
                    <li class="nav-item mr-2 admin-user-info d-flex align-items-center">
                        <img src="{{ current_user.avatar }}" alt="avatar" class="rounded-circle">
                        <span>{{ current_user.customer }}</span>
                    </li>

                    <li class="nav-item admin-logout">
                        <a class="nav-link"
                           href="{{ url_for('logout_my_user') }}">
                            <i class="fa fa-sign-out"></i>
                        </a>
                    </li>
                    {% endif %}
                </ul>

            </div>
        </nav>

        {{ layout.messages() }}

        {% set render_ctx = h.resolve_ctx() %}
        {% block body %}{% endblock %}
    </div>
</div>
{% endblock %}

{% block tail_js %}
{{ super() }}
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $('#sidebarCollapse').on('click', function () {
        $('#sidebar').toggleClass('active');
        $('body').toggleClass('sidebar-collapsed');
    });
</script>
{% endblock %}
</body>
</html>
