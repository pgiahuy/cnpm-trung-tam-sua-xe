{% extends 'layout/base.html' %}

{% block title %}{{ _("Linh kiện ô tô - Garage Center") }}{% endblock %}

{% block content %}
<div class="hero-section">
    <div class="container">
        <div class="overlay">
            <h1 class="display-4 text-white">{{ _("LINH KIỆN Ô TÔ") }}</h1>
            <p class="lead text-white-50">{{ _("Chính hãng – Giá tốt – Dễ đặt hàng") }}</p>
        </div>
    </div>
</div>

<div class="sparepart-wrapper">
    <!-- Phần này sẽ được load bằng AJAX -->
    <div id="sparepart-content">
        {% include 'sparepart_list.html' %} {# Tách riêng phần list + pagination để dễ load #}
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    document.body.addEventListener('click', function(e) {
        if (e.target.closest('a.page-link')) {
            e.preventDefault();
            const link = e.target.closest('a');
            const url = link.getAttribute('href');

            if (url && url !== '#') {
                fetch(url, {
                    headers: {
                        'X-Requested-With': 'XMLHttpRequest'
                    }
                })
                .then(response => response.text())
                .then(html => {
                    document.getElementById('sparepart-content').innerHTML = html;

                    // XÓA HOẶC COMMENT DÒNG NÀY ĐI:
                    // document.querySelector('.sparepart-wrapper').scrollIntoView({ behavior: 'smooth' });

                    // Nếu muốn giữ vị trí cố định ở đầu (nhưng không cuộn mượt), dùng:
                    // document.getElementById('sparepart-content').scrollIntoView({ behavior: 'instant' });
                })
                .catch(err => console.error('Lỗi load trang:', err));
            }
        }
    });
});
</script>
{% endblock %}